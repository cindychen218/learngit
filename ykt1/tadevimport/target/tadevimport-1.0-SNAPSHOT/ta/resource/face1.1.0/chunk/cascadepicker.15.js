webpackJsonp([15],{483:function(e,n,a){"use strict";var t,i,l,r;r=function(e){function n(a,t){n.DEFAULTS={data:[],url:"",isSearch:!0,toolTip:null,required:!1,defaultValue:null,disabled:!1,readOnly:!1,validType:[]};var i,l,r,s,d,o,c,u,f=e.extend({},n.DEFAULTS,e.isPlainObject(t)&&t);function v(){o.hasClass("icon-arrow_down")?m():h()}function p(){s.val(""),d.val(""),q()}function m(){var n,t=e("#"+a).val();if(null==t||""==t)i.html(""),y(null);else{for(var r=t.split("/"),s="",d=0;d<r.length;d++)for(var o=0;o<l.length;o++)if(l[o].id==r[d]){s+="<div>";for(var c=(n=l[o],void 0,_(w(n))),u=0;u<c.length;u++){var f=c[u];f.id==r[d]?S(f)?s+="<span _mod='select' key='"+f.id+"' class='cascadeSelected' title='"+f.name+"'>"+f.name+"</span>":s+="<span _mod='select' key='"+f.id+"' class='cascadeSelected hasChild' title='"+f.name+"' >"+f.name+"</span>":S(f)?s+="<span _mod='select' key='"+f.id+"'  title='"+f.name+"' >"+f.name+"</span>":s+="<span _mod='select' key='"+f.id+"' class='hasChild' title='"+f.name+"' >"+f.name+"</span>"}s+="</div>"}i.html(s)}C()}function y(n){for(var a=_(n),t="<div>",l=0;l<a.length;l++){var r=a[l];S(r)?t+="<span _mod='select' key='"+r.id+"' title='"+r.name+"' >"+r.name+"</span>":t+="<span _mod='select' key='"+r.id+"' class='hasChild' title='"+r.name+"' >"+r.name+"</span>"}e(t+="</ul>").appendTo(i)}function g(){s.val(""),q();var n,t=e("#"+a+"_desc").val(),d=t.indexOf("/");if(-1==d)n=t;else if(d==t.length-1){n=(o=t.split("/"))[o.length-2]}else{var o;n=(o=t.split("/"))[o.length-1]}if(null!=n&&""!=n){for(var c="<div >",u=0,f=0;f<l.length;f++){var v=l[f];if(-1!=v.id.toUpperCase().indexOf(n.toUpperCase())||-1!=v.name.toUpperCase().indexOf(n.toUpperCase())){var p=k(v,[v.id,v.name]);c+="<span _mod='search' key='"+p[0]+"' title='"+p[1]+"' >"+p[1]+"</span>",u++}}0==u&&(c+="<span >没有找到对应数据</span>"),c+="</ul>",i.html(c);var m=r.width()+parseInt(r.css("padding-left"))+parseInt(r.css("padding-right"));i.find("div").width(m),C()}}function C(){var e=r.offset();i.css("left",e.left+2+"px").css("top",e.top+32+"px"),i.slideDown(),o.removeClass("icon-arrow_down").addClass("icon-arrow_up")}function h(){i.slideUp(),o.removeClass("icon-arrow_up").addClass("icon-arrow_down")}function k(e,n){if(null==e.pid||e.pid==undefined)return n;var a=w(e);return null==a?n:(n[0]=a.id+"/"+n[0],n[1]=a.name+"/"+n[1],k(a,n))}function b(e){for(var n in l)if(l[n].id==e)return l[n];return null}function w(e){for(var n in l)if(l[n].id==e.pid)return l[n];return null}function _(e){null==e&&(e={id:""});var n=[];for(var a in l)l[a].pid==e.id&&n.push(l[a]);return n}function S(e){for(var n in l)if(l[n].pid==e.id)return!1;return!0}function x(){d.off("click"),d.off("keyup"),d.off("focus"),o.off("click"),c&&c.off("click"),i.is(":visible")&&h()}function A(){d.on("click",function(){m()}),d.on("keyup",function(){g()}),d.on("focus",function(){m()}),o.on("click",function(){v()}),c&&c.on("click",function(){p()})}function O(e){if("undefined"!=e){"string"!=typeof e&&(e+="");var n=e.split("/"),a=b(n[n.length-1]);if(null==a)return s.val(""),void d.val("");var t=k(a,[a.id,a.name]);t[0]==e?(s.val(t[0]),d.val(t[1])):(s.val(""),d.val(""))}}function T(e){!1===e?(s.removeAttr("readonly"),r.removeClass("readonly"),A()):(s.attr("readonly","readonly"),r.addClass("readonly"),x())}function V(e){!1===e?(s.attr("disabled","true"),d.attr("disabled","true"),r.addClass("disabled"),x()):(s.removeAttr("readonly"),r.removeClass("readonly"),s.removeAttr("disabled"),d.removeAttr("disabled"),r.removeClass("disabled"),A())}function q(){return!u||u.executeValidate()}function E(e){!1===e?r.removeClass("successvalidate").addClass("failvalidate"):!0===e?r.removeClass("failvalidate").addClass("successvalidate"):r.removeClass("failvalidate").removeClass("successvalidate")}function U(e){!1===e?(r.removeClass("failvalidate"),r.parent().removeClass("required"),u&&u.removeOrder("required")):(r.parent().addClass("required"),u?u.addOrder({type:"required",msg:f.toolTip}):(u=new validateObj(null,d,f,self.setStateStyle),d.addClass("validate"),u.addOrder({type:"required",msg:f.toolTip})))}!function(){d=e("#"+a+"_desc"),s=e("#"+a),r=s.parent(),(i=e("<div id='"+a+"_selectContainer' class='selectContainer '></div>")).appendTo(e("body")),(o=e("#"+a+"_arrow")).on("click",function(){v()}),(c=e("#"+a+"_clear")).on("click",function(){p()}),null==f.data||0==f.data.length?e.ajax({type:"post",timeout:6e4,url:f.url,async:!1,data:{},dataType:"json",success:function(e){l=e},error:function(){l=[]}}):l=f.data,d.on("click",function(){m()}).on("keyup",function(){g()}).on("foucs",function(){m()}),i.on("click",function(n){var a=n.srcElement?n.srcElement:n.target;if("SPAN"==a.tagName){if(e(a).hasClass("cascadeSelected")){var t=k(i=b(a.getAttribute("key")),[i.id,i.name]);return s.val(t[0]),d.val(t[1]),h(),void d.triggerHandler("contentChange")}e(a).siblings().removeClass("cascadeSelected"),e(a).addClass("cascadeSelected");var i,l=a.getAttribute("_mod");"select"!=l?"search"==l&&(s.val(a.getAttribute("key")),d.val(a.innerHTML),h(),d.triggerHandler("contentChange")):S(i=b(a.getAttribute("key")))?(t=k(i,[i.id,i.name]),s.val(t[0]),d.val(t[1]),h(),d.triggerHandler("contentChange")):(e(a).parent().nextAll().remove(),y(i))}}),e("body").on("click",function(n){var a=event.srcElement?event.srcElement:event.target;e.contains(i[0],a)||e.contains(s.parent().parent()[0],a)||h()}),f.validType&&(d.addClass("validate"),u=new validateObj(a,d,{triggerHandles:"contentChange click mouseover focus"},E));f.required&&U(),f.readOnly&&T(!0),f.disabled&&V(!1),f.defaultValue&&O(f.defaultValue)}(),e.extend(this,{cmptype:"cascadePicker",getValue:function(){return s.val()},setValue:O,setReadOnly:T,setEnable:V,setVisible:function(e,n){e?r.parent().show().css("visibility","visible"):n?r.parent().css("visibility","hidden"):r.parent().hide()},setFocus:function(){d.focus()},newSerialize:function(e,n){var a="";return d&&(a+=d.taserialize(n)+"&"),a+=s.taserialize(n)},doValidate:q,setValidateStyle:E,setRequired:U,getInput:function(){return d},getInputLabel:function(){return r.prev()},reset:function(){s.val(""),d.val(""),f.defaultValue&&O(f.defaultValue)}})}return a(504),e.extend(!0,window,{cascadePicker:n}),n.prototype=new TaFieldComponent,n.prototype.constructor=n,n},i=[a(0),a(33),a(52)],(l="function"==typeof(t=r)?t.apply(n,i):t)===undefined||(e.exports=l)},504:function(e,n){}});