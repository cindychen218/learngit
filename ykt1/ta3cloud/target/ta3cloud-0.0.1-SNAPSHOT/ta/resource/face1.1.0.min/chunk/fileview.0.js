webpackJsonp([0],{188:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,factory;factory=function($){function core(){var officeLib=["txt","ppt","doc","docx","xlsx","xls","pdf"],imgType=["jpg","png"],aviType=["mp4","avi"],$viewContainer,$viewTopBar,$viewContext,$viewBottomBar,$viewLeftControl,$viewRightControl,$viewControlBar,$viewControlInfo,$viewDownload,$viewRotate,$viewZoom,listIntros,intro,index,options={};function initPreviewFile(param){param=eval("("+param+")"),listIntros=param.listIntros,index=param.index,intro=param.listIntros[index],$.extend(options,intro),previewFile()}function previewFile(){$viewContainer=$("<div class='preview-view-Container'></div>"),createShadeMask(intro),$viewTopBar=createViewTopBar(intro),$viewContext=createViewContext(intro),$viewBottomBar=createViewBottomBar(),createViewControl(),$viewContainer.appendTo($("body"))}function reLoadPreview(e){buildViewContext($viewContext,e)}function createShadeMask(){var e=$("<div class='shade-mask'></div>");return e.appendTo($viewContainer),e}function createViewTopBar(){var e=$("<div class='view-topBar'></div>");return buildViewTopBar(e,intro),e.appendTo($viewContainer),e}function buildViewTopBar(e,i){e.empty();var a=$("<div class='view-topOpt'></div>"),t=$("<div class='view-close'><span class='faceIcon icon-close'></span></div>");t.on("click",function(){$viewContainer.remove()}),t.appendTo(a),a.appendTo(e)}function createViewContext(){var e=$("<div class='view-context'></div>");return buildViewContext(e,intro),e.appendTo($viewContainer),e}function buildViewContext(e,i){e.empty();var a=$("<div class='view-head'></div>"),t=$("<div class='view-center'></div>");if($.inArray(i.fileType,imgType)>-1)$("<img class='view-img' src='"+buildSrc(i)+"'/>").appendTo(t);else if($.inArray(i.fileType,aviType)>-1){var o;if(a.hide(),"mp4"==i.fileType)(o=$("<video class='view-media' height='"+i.mediaHeight+"' width='"+i.mediaWidth+"' controls='controls' preload='preload'><source src='"+buildSrc(i)+"'></source></video>")).appendTo(t);else(o=$("<div class='view-media'></div>")).media({height:i.mediaHeight,width:i.mediaWidth,src:buildSrc(i)}),o.appendTo(t)}else{a.hide();var n=$("<div class='view-office'></div>");if("pdf"==i.previewOfficeMode||"pdf"==i.fileType)var l=$("<iframe src='"+(Base.globvar.facePath||"")+"support/pdfjs/web/viewer.html?"+buildSrc(i,!0)+"&isdownLoad=false&isprint=false&targetType=pdf'></iframe>");else l=$("<iframe src='"+buildSrc(i,!1)+"&targetType=html'></iframe>");l.appendTo(n),n.appendTo(t)}a.appendTo(e),t.appendTo(e)}function createViewBottomBar(){if(options.viewWithThumbnail){var e=$("<div class='view-bottom'></div>");$viewContainer.addClass("view-mode-showThumbnail");for(var i=$("<ul class='view-thumbnail-ul'></ul>"),a=0;a<listIntros.length;a++){var t=listIntros[a];if(!t.isUploadEle){var o=$("<li class='view-thumbnail-li' _index='"+a+"'></li>");$.inArray(t.fileType,imgType)>-1?o.append("<img title='"+t.fileName+"' src='"+buildSrc(t)+"'/>"):o.append("<span title='"+t.fileName+"' class='not-img'>缩略图预览失败</span>"),o.on("click",function(){reloadViewContextEvent($(this).attr("_index"))}),a==index&&o.addClass("active"),o.appendTo(i)}}return i.appendTo(e),e.appendTo($viewContainer),$(window).on("resize",function(){calculateBarElePosition($(".active",e).attr("_index"))}),e}}function createViewControl(){if("simpleBar"==options.showFileBarMode)$viewLeftControl=$("<div class='view-control-left' '><span></span></div>"),$viewRightControl=$("<div class='view-control-right' '><span></span></div>"),initControlStep(index),$viewLeftControl.on("click",function(){var e=index,i=$(this).attr("_index");e==i&&alert("没有上一个文件了"),reloadViewContextEvent(i)}),$viewRightControl.on("click",function(){var e=index,i=$(this).attr("_index");e==i&&alert("没有下一个文件了"),reloadViewContextEvent(i)}),$viewLeftControl.appendTo($viewContainer),$viewRightControl.appendTo($viewContainer);else{$viewControlBar=$("<div class='view-control-bar'></div>");var e=$("<span class='view-control-bar-delimiter'></span>"),i=$("<span class='view-control-bar-delimiter'></span>");$viewControlInfo=$("<span>"+intro.fileName+"</span>");var a=$("<div class='view-control-top' '></span></div>"),t=$("<div class='view-control-bottom' '></div>");$viewLeftControl=$("<div class='view-control-bar-left' '><span></span></div>"),$viewRightControl=$("<div class='view-control-bar-right' '><span></span></div>"),$viewDownload=$("<div class='view-control-bar-download'><span></span></div>"),$viewRotate=$("<div class='view-control-bar-rotate'><span></span></div>"),$viewZoom=$("<div class='view-control-bar-fangda'><span></span></div>"),initControlStep(index),$viewLeftControl.on("click",function(){var e=index,i=$(this).attr("_index");e==i&&alert("没有上一个文件了"),reloadViewContextEvent(i)}),$viewRightControl.on("click",function(){var e=index,i=$(this).attr("_index");e==i&&alert("没有下一个文件了"),reloadViewContextEvent(i)}),initRotateState(index),initZoomState(index),initDownloadState(index),$viewControlInfo.appendTo(a),a.appendTo($viewControlBar),$viewLeftControl.appendTo(t),$viewRightControl.appendTo(t),e.appendTo(t),$viewRotate.appendTo(t),$viewZoom.appendTo(t),i.appendTo(t),$viewDownload.appendTo(t),t.appendTo($viewControlBar),$viewControlBar.appendTo($viewContainer),$viewControlBar.animate({opacity:0},3e3),$viewControlBar.on("mouseenter",function(){$viewControlBar.stop().animate({opacity:1},"fast")}),$viewControlBar.on("mouseleave",function(){$viewControlBar.animate({opacity:0},3e3)})}}function reloadViewContextEvent(e){goShowContext(e),initControlStep(e),$viewControlInfo&&$viewControlInfo.text(intro.fileName),$viewRotate&&initRotateState(e),$viewZoom&&initZoomState(e),$viewDownload&&initDownloadState(e),$viewControlBar&&$viewControlBar.stop().animate({opacity:1},"fast").animate({opacity:0},3e3),$viewBottomBar&&activeBottomEleByIndex(e)}function initControlStep(e){var i=getStep(e);$viewLeftControl.attr("_index",i.pref),$viewRightControl.attr("_index",i.next)}function getStep(e){var i,a;return 0==(e=Number(e))?(i=e,a=e+1):e==listIntros.length-1?(i=e-1,a=e):(i=e-1,a=e+1),{pref:i,next:a}}function initRotateState(e){$viewRotate&&($.inArray(listIntros[e].fileType,imgType)>-1?($viewRotate.removeClass("view-control-bar-disable"),$viewRotate.on("click",function(){var e=$(".view-img",$viewContext);e.is(".rotate90")?(e.removeClass("rotate90"),e.addClass("rotate180")):e.is(".rotate180")?(e.removeClass("rotate180"),e.addClass("rotate270")):e.is(".rotate270")?e.removeClass("rotate270"):e.addClass("rotate90")})):$viewRotate.addClass("view-control-bar-disable"))}function initZoomState(e){$viewZoom&&($.inArray(listIntros[e].fileType,aviType)<0?($viewZoom.removeClass("view-control-bar-disable"),$viewZoom.on("click",function(){$(this).is(".view-control-bar-suoxiao")?($viewContext.width("70%"),$viewZoom.removeClass(),$viewZoom.addClass("view-control-bar-fangda")):($viewContext.width("auto"),$viewZoom.removeClass(),$viewZoom.addClass("view-control-bar-suoxiao"))})):$viewZoom.addClass("view-control-bar-disable"))}function initDownloadState(e){$viewDownload&&(listIntros[e].isDownload&&!listIntros[e].beforeDownloadFun?($viewDownload.removeClass("view-control-bar-disable"),$viewDownload.on("click",function(){downloadFile(listIntros[e])})):($viewDownload.addClass("view-control-bar-disable"),$viewDownload.off("click")))}function activeBottomEleByIndex(e){$(".view-thumbnail-li",$viewBottomBar).removeClass("active"),$(".view-thumbnail-li[_index="+e+"]",$viewBottomBar).addClass("active"),calculateBarElePosition(e)}function calculateBarElePosition(e){var i=document.body.clientWidth,a=(document.body.clientHeight,$(".view-thumbnail-li[_index="+e+"]",$viewBottomBar).offset()),t=i/2;$viewBottomBar.animate({scrollLeft:$viewBottomBar.scrollLeft()+(a.left-t)},1e3)}function goShowContext(e){intro=listIntros[index=e],buildViewContext($viewContext,intro)}function showViewContextMessage(e,i){$("<div class='view-message'></div>").appendTo(e)}function toUniformCase(e){return e?e.toLowerCase():"unknown"}function downloadFile(e){if(isLinkUrl(e)){var i=e.sysPath||"",a=document.createElement("a");a.download=e.fileName,a.href=i+(e.downloadUrl||e.src),a.target="_blank",a.click()}else $("<form/>").attr("method","post").attr("display","none").appendTo("body").attr("action",buildSrc(e,!1,!1)).submit().remove()}function isLinkUrl(e){var i=[].concat(imgType);i.push("txt");var a=e.downloadUrl||e.src;return i.indexOf(e.fileType)>-1&&a.endsWithIn(i)}function buildSrc(e,i,a){var t=e.sysPath,o=(a=!1!==a)?e.src:e.downloadUrl||e.src,n="";t&&(n+=t),n.length>0&&!n.endsWith("/")&&(n+="/");return n+=o.startsWith("/")?o.substring(1,o.length):o,!0===i?"fileUrl="+n+"&fileId="+e.fileId+"&fileType="+e.fileType+"&fileName="+encodeURIComponent(e.fileName)+"&isPreview="+a+"&previewOfficeMode="+e.previewOfficeMode:n+"?fileId="+e.fileId+"&fileType="+e.fileType+"&fileName="+encodeURIComponent(e.fileName)+"&isPreview="+a+"&previewOfficeMode="+e.previewOfficeMode}return{initPreviewFile:initPreviewFile,downloadFile:downloadFile,buildSrc:buildSrc,toUniformCase:toUniformCase}}__webpack_require__(190),$.extend(!0,window,{Base:{FilePreview:core()}})},__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(189)],(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},189:function(e,i,a){"use strict";(function(e){!function(e){var i=document.documentMode||0,a=/MSIE/.test(navigator.userAgent),t=a&&(/MSIE (6|7|8)\.0/.test(navigator.userAgent)||i<9);e.fn.media=function(i,a,t){return"undo"==i?this.each(function(){var i=e(this),a=i.data("media.origHTML");a&&i.replaceWith(a)}):this.each(function(){"function"==typeof i&&(t=a,a=i,i={});var o=function(i,a){var t,o;a=a||{};var n=e(i),l=i.className||"",r=e.metadata?n.metadata():e.meta?n.data():{},s=(r=r||{}).width||parseInt((l.match(/\bw:(\d+)/)||[])[1]||0,10)||parseInt((l.match(/\bwidth:(\d+)/)||[])[1]||0,10),d=r.height||parseInt((l.match(/\bh:(\d+)/)||[])[1]||0,10)||parseInt((l.match(/\bheight:(\d+)/)||[])[1]||0,10);s&&(r.width=s);d&&(r.height=d);l&&(r.cls=l);for(var p=0;p<i.attributes.length;p++){t=i.attributes[p];var c=(o=e.trim(t.name)).indexOf("data-");0===c&&(o=o.substring("data-".length),r[o]=t.value)}t=e.fn.media.defaults;var v=a,f=r,w={params:{bgColor:a.bgColor||e.fn.media.defaults.bgColor}},m=e.extend({},t,v,f);e.each(["attrs","params","flashvars","silverlight"],function(i,a){m[a]=e.extend({},w[a]||{},t[a]||{},v[a]||{},f[a]||{})}),"undefined"==typeof m.caption&&(m.caption=n.text());return m.src=m.src||n.attr("href")||n.attr("src")||"unknown",m}(this,i);"function"==typeof a&&a(this,o);var n,l=function(){var i="";for(var a in e.fn.media.defaults.players)i.length&&(i+=","),i+=e.fn.media.defaults.players[a].types;return new RegExp("\\.("+i.replace(/,/gi,"|")+")\\b")}().exec(o.src.toLowerCase())||[""];o.type?l[0]=o.type:l.shift();for(var r=0;r<l.length;r++)if(s((n=l[r].toLowerCase())[0])&&(n="fn"+n),e.fn.media[n]){var d=e.fn.media[n+"_player"];if(o.params||(o.params={}),d){var p="autostart"==d.autoplayAttr;o.params[d.autoplayAttr||"autoplay"]=p?o.autoplay?1:0:!!o.autoplay}var c=e.fn.media[n](this,o);if(c.css("backgroundColor",o.bgColor).width(o.width),o.canUndo){var v=e("<div></div>").append(this);c.data("media.origHTML",v.html())}"function"==typeof t&&t(this,c[0],o,d.name);break}})},e.fn.media.mapFormat=function(i,a){i&&a&&e.fn.media.defaults.players[a]&&(s((i=i.toLowerCase())[0])&&(i="fn"+i),e.fn.media[i]=e.fn.media[a],e.fn.media[i+"_player"]=e.fn.media.defaults.players[a])},e.fn.media.defaults={standards:!0,canUndo:!0,width:400,height:400,autoplay:0,bgColor:"#ffffff",params:{wmode:"transparent"},attrs:{},flvKeyName:"file",flashvars:{},flashVersion:"7",expressInstaller:null,flvPlayer:"mediaplayer.swf",mp3Player:"mediaplayer.swf",silverlight:{inplaceInstallPrompt:"true",isWindowless:"true",framerate:"24",version:"0.9",onError:null,onLoad:null,initParams:null,userContext:null}},e.fn.media.defaults.players={flash:{name:"flash",title:"Flash",types:"flv,mp3,swf",mimetype:"application/x-shockwave-flash",pluginspage:"http://www.adobe.com/go/getflashplayer",ieAttrs:{classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",type:"application/x-oleobject",codebase:"http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version="+e.fn.media.defaults.flashVersion}},quicktime:{name:"quicktime",title:"QuickTime",mimetype:"video/quicktime",pluginspage:"http://www.apple.com/quicktime/download/",types:"aif,aiff,aac,au,bmp,gsm,mov,mid,midi,mpg,mpeg,m4a,psd,qt,qtif,qif,qti,snd,tif,tiff,wav,3g2,3gp",ieAttrs:{classid:"clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B",codebase:"http://www.apple.com/qtactivex/qtplugin.cab"}},realplayer:{name:"real",title:"RealPlayer",types:"ra,ram,rm,rpm,rv,smi,smil",mimetype:"audio/x-pn-realaudio-plugin",pluginspage:"http://www.real.com/player/",autoplayAttr:"autostart",ieAttrs:{classid:"clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA"}},winmedia:{name:"winmedia",title:"Windows Media",types:"asx,asf,avi,wma,wmv",mimetype:function(){for(var e=navigator.plugins||[],i=0;i<e.length;i++){var a=e[i];if("np-mswmp.dll"==a.filename)return!0}return!1}()?"application/x-ms-wmp":"application/x-mplayer2",pluginspage:"http://www.microsoft.com/Windows/MediaPlayer/",autoplayAttr:"autostart",oUrl:"url",ieAttrs:{classid:"clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6",type:"application/x-oleobject"}},img:{name:"img",title:"Image",types:"gif,png,jpg"},iframe:{name:"iframe",types:"html,pdf"},silverlight:{name:"silverlight",types:"xaml"}};var o=1;for(var n in e.fn.media.defaults.players){var l=e.fn.media.defaults.players[n].types;e.each(l.split(","),function(i,a){s(a[0])&&(a="fn"+a),e.fn.media[a]=e.fn.media[n]=r(n),e.fn.media[a+"_player"]=e.fn.media.defaults.players[n]})}function r(e){return function(i,a){return d(i,a,e)}}function s(e){return"0123456789".indexOf(e)>-1}function d(i,o,n){var l,r,s,d=e(i),p=e.fn.media.defaults.players[n];if("iframe"==n)(p=e('<iframe width="'+o.width+'" height="'+o.height+'" >')).attr("src",o.src),p.css("backgroundColor",p.bgColor);else if("img"==n)(p=e("<img>")).attr("src",o.src),o.width&&p.attr("width",o.width),o.height&&p.attr("height",o.height),p.css("backgroundColor",p.bgColor);else if(t){for(r in l=['<object width="'+o.width+'" height="'+o.height+'" '],o.attrs)l.push(r+'="'+o.attrs[r]+'" ');for(r in p.ieAttrs||{})s=p.ieAttrs[r],"codebase"==r&&"https:"==window.location.protocol&&(s=s.replace("http","https")),l.push(r+'="'+s+'" ');l.push("></object>");var c=['<param name="'+(p.oUrl||"src")+'" value="'+o.src+'">'];for(r in o.params)c.push('<param name="'+r+'" value="'+o.params[r]+'">');p=document.createElement(l.join(""));for(var v=0;v<c.length;v++)p.appendChild(document.createElement(c[v]))}else if(o.standards){if(l=['<object type="'+p.mimetype+'" width="'+o.width+'" height="'+o.height+'"'],o.src&&l.push(' data="'+o.src+'" '),a)for(r in p.ieAttrs||{})s=p.ieAttrs[r],"codebase"==r&&"https:"==window.location.protocol&&(s=s.replace("http","https")),l.push(r+'="'+s+'" ');for(r in l.push(">"),l.push('<param name="'+(p.oUrl||"src")+'" value="'+o.src+'">'),o.params)"wmode"==r&&"flash"!=n||l.push('<param name="'+r+'" value="'+o.params[r]+'">');l.push("<div><p><strong>"+p.title+" Required</strong></p><p>"+p.title+' is required to view this media. <a href="'+p.pluginspage+'">Download Here</a>.</p></div>'),l.push("</object>")}else{for(r in l=['<embed width="'+o.width+'" height="'+o.height+'" style="display:block"'],o.src&&l.push(' src="'+o.src+'" '),o.attrs)l.push(r+'="'+o.attrs[r]+'" ');for(r in p.eAttrs||{})l.push(r+'="'+p.eAttrs[r]+'" ');for(r in o.params)"wmode"==r&&"flash"!=n||l.push(r+'="'+o.params[r]+'" ');l.push("></embed>")}var f=i.id?' id="'+i.id+'"':"",w=o.cls?' class="'+o.cls+'"':"",m=e("<div"+f+w+">");return d.after(m).remove(),t||"iframe"==n||"img"==n?m.append(p):m.html(l.join("")),o.caption&&e("<div>").appendTo(m).html(o.caption),m}e.fn.media.swf=function(i,a){var t,n;if(!window.SWFObject&&!window.swfobject){if(a.flashvars){var l=[];for(t in a.flashvars)l.push(t+"="+a.flashvars[t]);a.params||(a.params={}),a.params.flashvars=l.join("&")}return d(i,a,"flash")}var r=i.id?' id="'+i.id+'"':"",s=a.cls?' class="'+a.cls+'"':"",p=e("<div"+r+s+">");if(window.swfobject)e(i).after(p).appendTo(p),i.id||(i.id="movie_player_"+o++),window.swfobject.embedSWF(a.src,i.id,a.width,a.height,a.flashVersion,a.expressInstaller,a.flashvars,a.params,a.attrs);else{e(i).after(p).remove();var c=new SWFObject(a.src,"movie_player_"+o++,a.width,a.height,a.flashVersion,a.bgColor);for(n in a.expressInstaller&&c.useExpressInstall(a.expressInstaller),a.params)"bgColor"!=n&&c.addParam(n,a.params[n]);for(t in a.flashvars)c.addVariable(t,a.flashvars[t]);c.write(p[0])}return a.caption&&e("<div>").appendTo(p).html(a.caption),p},e.fn.media.flv=e.fn.media.mp3=function(i,a){var t=a.src,o=/\.mp3\b/i.test(t)?a.mp3Player:a.flvPlayer,n=a.flvKeyName;t=encodeURIComponent(t),a.src=o,a.src=a.src+"?"+n+"="+t;var l={};return l[n]=t,a.flashvars=e.extend({},l,a.flashvars),e.fn.media.swf(i,a)},e.fn.media.xaml=function(i,a){if(!window.Sys||!window.Sys.Silverlight){if(e.fn.media.xaml.warning)return;return e.fn.media.xaml.warning=1,void alert("You must include the Silverlight.js script.")}var t={width:a.width,height:a.height,background:a.bgColor,inplaceInstallPrompt:a.silverlight.inplaceInstallPrompt,isWindowless:a.silverlight.isWindowless,framerate:a.silverlight.framerate,version:a.silverlight.version},n={onError:a.silverlight.onError,onLoad:a.silverlight.onLoad},l=i.id?' id="'+i.id+'"':"",r=a.id||"AG"+o++,s=a.cls?' class="'+a.cls+'"':"",d=e("<div"+l+s+">");return e(i).after(d).remove(),Sys.Silverlight.createObjectEx({source:a.src,initParams:a.silverlight.initParams,userContext:a.silverlight.userContext,id:r,parentElement:d[0],properties:t,events:n}),a.caption&&e("<div>").appendTo(d).html(a.caption),d}}(e)}).call(i,a(0))},190:function(e,i){},498:function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,factory;factory=function($){function TaFileView(fileviewId,options){options=$.extend({showFileMode:"simple",showFileBarMode:"boxBar",isShowMiniView:!0,isUpload:!0,isRemove:!0,isPreview:!0,isDownload:!0,uploadFun:null,beforeRemoveFun:null,beforeDownloadFun:null,clearFun:null,eleWidth:100,datas:[],viewWithThumbnail:!1},options||{});var defaultEle={previewOfficeMode:"pdf",fileId:null,fileName:null,fileSize:null,fileDesc:null,fileType:undefined,sysPath:Base.globvar.basePath,src:null,downloadUrl:null,mediaHeight:400,mediaWidth:600},uploadEle={fileId:"filedUpload",isUploadEle:!0,fileType:"upload",fileName:"文件上传"},$layoutContainer=$("#"+fileviewId),$uploadEle,officeLib=["txt","ppt","doc","docx","xlsx","xls","pdf"],imgType=["jpg","png"],aviType=["mp4","avi"],$viewContainer;function init(){switch(options.showFileMode){case"simple":$layoutContainer.addClass("fileviewGroup-mode-tb");break;case"list":$layoutContainer.addClass("fileviewGroup-mode-lr");break;case"simpleList":$layoutContainer.addClass("fileviewGroup-mode-lr-simple")}options.isUpload&&(options.datas=options.datas||[],options.datas.push(uploadEle));for(var e=0;e<options.datas.length;e++){var i=createViewElementBox();createViewElement(i,options.datas,e),i.appendTo($layoutContainer),options.datas[e].isUploadEle&&($uploadEle=i)}styleCorrection($layoutContainer)}function styleCorrection(e){"simple"==options.showFileMode&&100!=options.eleWidth&&(e.hasClass("view-ele-box")?e.css("width",options.eleWidth+"px"):$(".view-ele-box",e).css("width",options.eleWidth+"px"),$(".fileview-img",e).css("height",.5*options.eleWidth+"px"),$(".fileview-img>span",e).css("fontSize",.38*options.eleWidth+"px"),options.eleWidth<100?($(".img-opt-box",e).css("height","20px"),$(".img-opt-box>div>span",e).css("fontSize","10px")):options.eleWidth>300&&($(".img-opt-box",e).css("height","50px"),$(".img-opt-box>div>span",e).css("fontSize","40px")))}function createViewElementBox(){return $("<div class='view-ele-box'></div>")}function createViewElement($eleBox,datas,_index){var _options=$.extend({},options);_options.datas=null;var data=datas[_index]=$.extend({},defaultEle,datas[_index]||{},_options);"undefined"!=typeof data.fileId&&null!=data.fileId||(data.fileId="fileId"+_index);var $eleLayoutContainer=$("<div _field="+data.fileId+" class='fileview-layout-Container'></div>");switch(options.showFileMode){case"simple":$eleLayoutContainer.addClass("fileview-mode-tb");break;case"list":$eleLayoutContainer.addClass("fileview-mode-lr");break;case"simpleList":$eleLayoutContainer.addClass("fileview-mode-lr-simple")}var $eleImgBox=$("<div class='fileview-img'></div>");if(options.isShowMiniView&&"simple"==options.showFileMode&&$.inArray(data.fileType,imgType)>-1){var $eleImg=$("<img class='preview-view-imgspan'></img>"),image=new Image;image.src=Base.FilePreview.buildSrc(data),image.onload=function(){$eleImg.attr("src",image.src)}}else{var $eleImg=$("<span class='preview-view-imgspan'></span>");$.inArray(data.fileType,officeLib)>-1||$.inArray(data.fileType,imgType)>-1||$.inArray(data.fileType,aviType)>-1||"upload"==data.fileType?$eleImg.addClass("type-"+data.fileType):$eleImg.addClass("type-unknown")}if($eleImg.appendTo($eleImgBox),!data.isUploadEle&&"simple"==options.showFileMode&&(data.isDownload||data.isRemove)){var $eleImgOptBox=$("<div class='img-opt-box'></div>");if(data.isDownload){var $eleDownloadBox=$("<div class='download-box'></div>"),$eleDownload=$("<span class='download'></span>");$eleDownload.appendTo($eleDownloadBox),$eleDownloadBox.appendTo($eleImgOptBox),$eleDownload.on("click",function(e){downloadFile(data)})}if(data.isRemove){var $eleRemoveBox=$("<div class='remove-box'></div>"),$eleRemove=$("<span class='remove'></span>");$eleRemove.appendTo($eleRemoveBox),$eleRemoveBox.appendTo($eleImgOptBox),$eleRemove.on("click",function(e){removeFile($(this),data.fileId)})}$eleImgOptBox.appendTo($eleImgBox),$eleImgBox.on("mouseenter",function(){$eleImgOptBox.stop().fadeIn()}).on("mouseleave",function(){$eleImgOptBox.stop().fadeOut()}),$eleImgOptBox.on("click",function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1})}var $eleDescBox=$("<div class='fileview-desc-Container'></div>"),$eleDescMessageBox=$("<div class='fileview-desc'></div>"),$eleName=$("<span class='name'></span>");if($eleName.text(data.fileName),$eleName.attr("title",data.fileName),$eleName.appendTo($eleDescMessageBox),!data.isUploadEle&&"simple"!=options.showFileMode&&data.fileSize){var $eleSize=$("<span class='size'></span>");$eleSize.text("（"+data.fileSize+"）"),$eleSize.attr("title","文件大小："+data.fileSize),$eleSize.appendTo($eleDescMessageBox)}if($eleDescMessageBox.appendTo($eleDescBox),!data.isUploadEle&&"simple"!=options.showFileMode){var $eleDescOptBox=$("<div class='fileview-opt'></div>"),$elePreview;if(data.isPreview,data.isDownload){var $eleDownload=$(" <a href='#' class='download'>下载</a>");$eleDownload.appendTo($eleDescOptBox),$eleDownload.on("click",function(){downloadFile(data)})}if(data.isRemove){var $eleRemove=$(" <a href='#' class='remove'>删除</a>");$eleRemove.appendTo($eleDescOptBox),$eleRemove.on("click",function(){removeFile($(this),data.fileId)})}$eleDescOptBox.appendTo($eleDescBox),$eleDescOptBox.on("click",function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1})}var $eleClearBox=$("<div style='clear: both'></div>");data.isUploadEle?$eleLayoutContainer.on("click",function(e){options.uploadFun&&eval(options.uploadFun)(addFile)}):data.isPreview&&$($eleLayoutContainer,$elePreview).on("click",function(e){$.inArray(data.fileType,officeLib)<0&&$.inArray(data.fileType,imgType)<0&&$.inArray(data.fileType,aviType)<0?alert("未知的文件类型，暂不支持预览！"):data.src?previewFile(data):alert("预览失败，未获取到文件路径！")}),$eleImgBox.appendTo($eleLayoutContainer),$eleDescBox.appendTo($eleLayoutContainer),$eleClearBox.appendTo($eleLayoutContainer),$eleLayoutContainer.appendTo($eleBox)}function _declarationState(e){}function getPreviewPanelParam(){return{}}function previewFile(e){for(var i=options.datas,a=0,t=[],o=0;o<i.length;o++)i[o].fileId==e.fileId&&(a=o),i[o].isUploadEle||t.push(cloneObject(i[o]));var n={listIntros:t,index:a};window.sendPostMessage(window.top,"Base.FilePreview.initPreviewFile",Ta.util.obj2string(n))}function cloneObject(e){var i={};for(var a in e)"function"!=typeof e[a]?i[a]=e[a]:i[a]=e[a].name;return i}function showViewContextMessage(e,i){$("<div class='view-message'></div>").appendTo(e)}function setVisible(e,i){e?$layoutContainer.show().css("visibility","visible"):i?$layoutContainer.css("visibility","hidden"):$layoutContainer.hide()}function addFile(e){$uploadEle.hide(),options.datas.splice(options.datas.length-1,0,e);var i=createViewElementBox();i.hide(),createViewElement(i,options.datas,options.datas.length-2),i.insertBefore($uploadEle),styleCorrection(i),i.fadeIn(400,function(){$uploadEle.show()})}function removeFile($ele,id){for(var data={},i=0;i<options.datas.length;i++)if(options.datas[i].fileId==id){data=options.datas[i];var bool=!0;if(options.beforeRemoveFun&&(bool=eval(options.beforeRemoveFun)(data)),!bool)break;$ele=$ele.parents(".view-ele-box"),$ele.off("click"),$ele.fadeOut(400,function(){$ele.remove(),options.datas.splice(i,1)});break}}function removeFileById(e){removeFile($(".fileview-layout-Container[_field="+e+"]",$layoutContainer).eq(0),e)}function downloadFile(data){var bool=!0;options.beforeDownloadFun&&(bool=eval(options.beforeDownloadFun)(data)),bool&&Base.FilePreview.downloadFile(data)}function downloadFIleById(e){for(var i=0;i<options.datas.length;i++)options.datas[i].fileId==e&&downloadFile(options.datas[i])}function getDatas(){return options.datas}function setDatas(datas){"string"==typeof datas&&(datas=eval(datas)),$.isArray(datas)&&($layoutContainer.empty(),options.datas=[].concat(datas||[]),init())}function clear(){$layoutContainer.empty(),options.datas=[],init(),options.clearFun&&eval(options.clearFun)()}function getValue(){for(var e=getDatas(),i=0;i<e.length;i++)e[i].fileId==uploadEle.fileId&&e.splice(i,1);return e}function setValue(e){setDatas(e=$.isArray(e)?e:[])}init(),$.extend(this,{cmptype:"TaFileview",version:"1.1.0",setVisible:setVisible,getDatas:getDatas,setDatas:setDatas,setValue:setValue,getValue:getValue,clear:clear,addFile:addFile,downloadFIleById:downloadFIleById,removeFileById:removeFileById})}return __webpack_require__(526),$.extend(!0,window,{TaFileView:TaFileView}),TaFileView.prototype=new TaFieldComponent,TaFileView.prototype.constructor=TaFileView,TaFileView},__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(0),__webpack_require__(5),__webpack_require__(36),__webpack_require__(188),__webpack_require__(33)],(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)===undefined||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},526:function(e,i){}});